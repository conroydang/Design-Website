if (self.CavalryLogger) { CavalryLogger.start_js(["+R\/X9"]); }

__d("ReviewPagingNotifier",["Arbiter"],(function(a,b,c,d,e,f){var g={PAGING_STATE:"paging_state",PAGING_FINISHED:"paging_finished",send_state:function(a,c){a={context:a,state:c};b("Arbiter").inform(g.PAGING_STATE,a,"state")},paging_finished:function(a){g.send_state(a,g.PAGING_FINISHED)}};e.exports=g}),null);
__d("NodeHighlighter",["DOM","TokenizeUtil","concatMap","escapeRegex","getElementText","isTextNode"],(function(a,b,c,d,e,f){var g={};function h(a,c){a=b("getElementText")(a).split(c);var d=a.map(function(a){return c.test(a)?i(a):a||""});return a.length>1?d:null}function i(a){a=b("DOM").create("span",{"class":"highlightNode",className:"highlightNode"},a);return a}a={getTextNodes:function(a){if(this.isLeafNode(a)||this.isStopNode(a))return a;else if(this.isDiscardNode(a))return[];return b("concatMap")(this.getTextNodes.bind(this),Array.from(a.childNodes))},getHighlightCandidates:function(){return[]},isLeafNode:function(a){return b("isTextNode")(a)},isStopNode:function(a){return!1},isDiscardNode:function(a){return!1},createSegmentedRegex:function(a){var c=b("TokenizeUtil").getPunctuation();a=this.escapeAndAddBidirectionalCharsToTokens(a);a=a.map(function(a){a=a.split(/\s+/).join("(?:"+c+"|\\s)+");return a});return"(^|\\s|"+c+")("+a.join("|")+")(?=(?:$|\\s|"+c+"))"},createNonSegmentedRegex:function(a){return"("+a.map(b("escapeRegex")).join("|")+")"},escapeAndAddBidirectionalCharsToTokens:function(a){var c="[\\u200E\\u200F\\u202A\\u202B\\u202C\\u202D\\u202E]*";return a.map(function(a){return c+String(a).split("").map(b("escapeRegex")).join(c)+c})},createRegex:function(a){a=a.filter(function(a){return a});if(!a||a.length===0)return new RegExp(null);var b=a.join("|");if(g[b])return g[b];var c=/[\u0E00-\u109F\u2000-\uFFFF]/,d=[],e=[];a.forEach(function(a){c.test(a)?e.push(a):d.push(a)});a="";d.length&&(a+=this.createSegmentedRegex(d),a+=e.length?"|":"");e.length&&(a+=this.createNonSegmentedRegex(e));a=new RegExp(a,"i");g[b]=a;return a},searchNodes:function(a,c){return b("DOM").scry(a,c)},highlight:function(a,c){var d=this;c=c.filter(function(a){return a});if(!c||c.length===0||!a)return;var e=b("concatMap")(function(c){return b("concatMap")(d.getTextNodes.bind(d),d.searchNodes(a,c))},this.getHighlightCandidates()),f=this.createRegex(c);e.forEach(function(a){var c=h(a,f);c&&(d.isStopNode(a)?b("DOM").setContent(a,c):d.isLeafNode(a)&&(b("DOM").insertAfter(a,c),a.textContent=""))})}};e.exports=a}),null);