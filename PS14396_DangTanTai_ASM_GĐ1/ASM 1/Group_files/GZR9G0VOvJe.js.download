if (self.CavalryLogger) { CavalryLogger.start_js(["q74qD"]); }

__d("PinnedConversationNubsActionTaken",[],(function(a,b,c,d,e,f){e.exports={TAB_CLOSED_BY_USER:0}}),null);
__d("XGamesNavigationSliderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/async/navigationslider/",{id:{type:"String",required:!0},referral_objects:{type:"StringVector",defaultValue:[]},num_items_per_page:{type:"Int",required:!0},num_rows:{type:"Int",defaultValue:1},width:{type:"Int",required:!0},height:{type:"Int",required:!0},days_since:{type:"Int"},row_type:{type:"Enum",enumType:1},upsell_type:{type:"Enum",enumType:1}})}),null);
__d("CanvasNavigationSlider",["AsyncRequest","DataStore","Event","XGamesNavigationSliderAsyncController"],(function(a,b,c,d,e,f){var g="GamesNavigationSlider";a=function(){"use strict";a.init=function(b,c){return new a(b,c)};function a(a,c){var d=this;this.$1=c.autoscroll;this.$2=a;this.$3=c.referral_objects;this.$4=a.getNode().id;this.$5=c.height;this.$6=c.width;this.$7=c.days_since;this.$8=c.num_items_per_page;this.$9=c.num_rows;this.$10=!1;this.$11=c.row_type;this.$12=c.upsell_type;b("DataStore").set(g,this.$4,this);(a.getIndex()>0||this.$1)&&this.$13();var e=b("Event").listen(a.getNextArrow(),"click",function(){e.remove(),d.$13()}.bind(this))}var c=a.prototype;c.$13=function(){if(this.$10)return;this.$10=!0;var a=b("XGamesNavigationSliderAsyncController").getURIBuilder().setString("id",this.$4).setInt("num_items_per_page",this.$8).setInt("num_rows",this.$9).setInt("width",this.$6).setInt("height",this.$5);this.$11&&(a=a.setEnum("row_type",this.$11));this.$12&&(a=a.setEnum("upsell_type",this.$12));this.$7&&(a=a.setInt("days_since",this.$7));new(b("AsyncRequest"))(a.getURI()).setData({referral_objects:this.$3}).send()};c.$14=function(a){var b=this;a.forEach(function(a){b.$2.push(a)})};a.update=function(a,c){a=b("DataStore").get(g,a);a.$14(c)};return a}();e.exports=a}),null);
__d("ConversationNubTabStateListStorage",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=[]}var b=a.prototype;b.modify=function(a){this.$1=a(this.$1)};b.getData=function(){return this.$1};return a}();e.exports=a}),null);
__d("differenceSets",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=new Set();for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];FIRST:for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}var j=i;for(var k=0;k<d.length;k++){var l=d[k];if(l.has(j))continue FIRST}b.add(j)}return b}e.exports=a}),null);
__d("ConversationNubTabStateList",["invariant","ConversationNubTabStateListStorage","differenceSets"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$2=new Set(),this.$1=new(b("ConversationNubTabStateListStorage"))()}var c=a.prototype;c.modifyTabState=function(a,b){this.modifyTabs(function(c){var d=c.findIndex(function(b){return b.tabID===a});d!==-1||g(0,5816);b(c[d]);return c})};c.$3=function(a){return new Set(a.map(function(a){return a.tabID}))};c.modifyTabs=function(a){var c=this;try{this.$1.modify(function(d){var e=c.$3(d);d=a(d);var f=c.$3(d);c.$2=b("differenceSets")(e,f);return d})}finally{this.$2=new Set()}};c.getTabs=function(){return this.$1.getData()};c.getTabState=function(a){a=this.getTabStateIfExists(a);a||g(0,5816);return a};c.getTabStateIfExists=function(a){return this.getTabs().find(function(b){return b.tabID===a})};c.push=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];this.modifyTabs(function(a){b.forEach(function(b){a.find(function(a){return a.tabID===b.tabID})?g(0,5817,b.tabID):a.push(b)});return a})};c.remove=function(a){this.modifyTabs(function(b){var c=b.findIndex(function(b){return b.tabID===a});c!==-1&&b.splice(c,1);return b})};return a}();e.exports=a}),null);
__d("ConversationNubTabState",["invariant","ConversationNubTabStateList"],(function(a,b,c,d,e,f,g){"use strict";var h=12;a=function(){function a(){this.$1=Object.create(null),this.$2=new(b("ConversationNubTabStateList"))(),this.$3=Infinity}var c=a.prototype;c.anyTabHasFocus=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getIsFocused()})};c.anyTabHasText=function(){return this.getUnsortedLoadedTabs().some(function(a){return a.getHasText()})};c.getTabState=function(a){return this.$2.getTabState(a)};c.getTabStateIfExists=function(a){return this.$2.getTabStateIfExists(a)};c.getUnloadedTabs=function(){var a=this,b=this.$2.getTabs().filter(function(b){return!a.getLoadedTab(b.tabID)});return b};c.setMaxDockTabs=function(a){this.$3=a};c.getNumDockTabs=function(){var a=this.$3,b=this.getTotalTabCount();return Math.min(a,b)};c.getNumMenuTabs=function(){return this.getTotalTabCount()-this.getNumDockTabs()};c.addTabState=function(a){this.$2.push(a)};c.addLoadedTab=function(a,b){var c=this.getTabState(a);if(!c)return;c=this.getLoadedTab(a);if(c)return;this.$1[a]=b;this.$4()};c.getLoadedTab=function(a){return this.$1[a]};c.getLoadedTabByFeedbackTarget=function(a){return this.getLoadedTabs().find(function(b){return b.getPersistentState().ftID===a})};c.isTabInDock=function(a){a=this.getLoadedTab(a);if(!a)return!1;a=this.$5(a);return 0<=a&&a<this.getNumDockTabs()};c.clearTabNotifications=function(a){this.$2.modifyTabState(a,function(a){a.unseenCommentsSinceLastCleared={},a.hasFakeInitBadge=!1,a.badgeCount=0,a.isBlinkingUnread=!1})};c.deleteTab=function(a){var b=this.getLoadedTab(a);b&&(delete this.$1[a],b.destroy());this.$2.remove(a);return Boolean(b)};c.deleteAllTabs=function(){var a=this;this.getUnsortedLoadedTabs().forEach(function(b){return a.deleteTab(b.getTabID())})};c.modifyTabState=function(a,b){return this.$2.modifyTabState(a,b)};c.moveTabToDockLeft=function(a){var b=this,c=this.getLoadedTab(a);if(!c)return;this.$2.modifyTabs(function(d){var e=d.findIndex(function(b){return b.tabID===a});e!==-1||g(0,5816);var f=d[e],h=b.$5(c),i=b.getLoadedTabs().length,j=b.getNumDockTabs();if(h<0||i===0)return d;else if(j===0){h!==0&&(d.splice(e,1),d.unshift(f));return d}i=j-1;if(h===i)return d;d.splice(e,1);h<i&&(i-=1);j=b.getLoadedTabs()[i];var k=b.getTabState(j.getTabID());k||g(0,6150);e=d.findIndex(function(a){return a.tabID===k.tabID});d.splice(e,0,f);return d})};c.getLoadedTabs=function(){var a=this,b=this.$2.getTabs().map(function(b){return a.getLoadedTab(b.tabID)}).filter(Boolean);return b};c.getUnsortedLoadedTabs=function(){var a=Object.values(this.$1);return a};c.getTotalTabCount=function(){return this.getUnsortedLoadedTabs().length};c.getTabsForDockOldestFirst=function(){return this.getLoadedTabs().slice(0,this.getNumDockTabs())};c.getTabsForDockNewestFirst=function(){return this.getTabsForDockOldestFirst().slice().reverse()};c.getTabsForMenuOldestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs())};c.getTabsForMenuNewestFirst=function(){return this.getLoadedTabs().slice(this.getNumDockTabs()).reverse()};c.$4=function(){var a=this,b=this.getLoadedTabs().length;if(b>h){b=b-h;b=this.getTabsForMenuOldestFirst().slice(0,b);b.map(function(a){return a.getTabID()}).forEach(function(b){return a.deleteTab(b)})}};c.$5=function(a){return this.getLoadedTabs().indexOf(a)};return a}();e.exports=new a()}),null);
__d("ConversationNub",["csx","cx","Arbiter","ConversationNubHeader","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","CSS","DOM","EventListener","NotificationUserActions","SubscriptionsHandler","UFIComposerIsTypingStore","URI","clearTimeout","containsNode","debounce","guid","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("ConversationNubTabsUpdateEventController").minimizeAndInformTabUpdate,k=b("ConversationNubTabsUpdateEventController").popOutAndInformTabUpdate,l=b("ConversationNubTabState"),m=10,n=500,o=100;a=function(){a.createDefaultState=function(a,c,d,e,f,g){return{tabID:a,permalinkURI:c!=null?new(i||(i=b("URI")))(c):null,ftID:d,notifAlertID:e,notificationType:f,title:g,keepAtBottom:!1,isTabRaised:!1,isBlinkingUnread:!1,badgeCount:0,allSeenNewComments:{},unseenCommentsSinceLastCleared:{},hasFakeInitBadge:!1}};function a(a,c,d,e,f,g){var h=this;f===void 0&&(f=!1);g===void 0&&(g=!1);this.$13=!1;this.$14=!1;this.$1=a;this.$12=c;this.$5=b("guid")();this.$7=null;this.$8=!1;this.$9=null;this.$10=f;this.$11=g;this.$15=e;this.$6=new(b("SubscriptionsHandler"))();this.$16();this.$17();d!=null&&l.modifyTabState(this.$12,function(a){d?a.hasFakeInitBadge=!1:(a.hasFakeInitBadge=!0,h.$18(1),h.$19(!0))});this.$20()}var c=a.prototype;c.$20=function(){this.$21(),this.$22(),b("ConversationNubUtils").informShouldRecheckTabVisibility(this),this.forceReflow()};c.getPersistentState=function(){return l.getTabState(this.$12)};c.getPersistentStateIfExists=function(){return l.getTabStateIfExists(this.$12)};c.$16=function(){var a=this.$23();if(a){this.$6.addSubscriptions(b("EventListener").listen(a,"click",this.$24.bind(this)),b("EventListener").listen(a,"mouseenter",this.$25.bind(this)),b("EventListener").listen(a,"mouseleave",this.$26.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$6,this.$27.bind(this))}a=this.$28();a&&(l.modifyTabState(this.$12,function(a){a.keepAtBottom=!0}),this.$6.addSubscriptions(b("EventListener").listen(a,"scroll",b("debounce")(this.$29.bind(this),o)),b("Arbiter").subscribe("reflow",this.$30.bind(this))));a=this.$31();a&&this.$6.addSubscriptions(b("EventListener").listen(a,"focusin",this.$32.bind(this,!0)),b("EventListener").listen(a,"focusout",this.$32.bind(this,!1)))};c.$17=function(){var a=this,c=this.$33();if(!c){this.$2=null;return}var d=function(){var b=a.getPersistentState();return{permalinkURI:b.permalinkURI,ftID:b.ftID,tabID:b.tabID}};c=new(b("ConversationNubHeader"))(c,d);this.$6.addSubscriptions(c.subscribe("closeButton",this.$27.bind(this)),c.subscribe("showMenu",this.$34.bind(this)),c.subscribe("hideMenu",this.$35.bind(this)),c.subscribe("minimizeButton",this.$36.bind(this,!0)),c.subscribe("clickHeader",this.$36.bind(this,!0)),c.subscribe("menuPermalinkClick",this.$36.bind(this,!1)),b("UFIComposerIsTypingStore").addListener(function(){var c=a.getPersistentStateIfExists();if(!c)return;var d=a.$14;c=b("UFIComposerIsTypingStore").getValueFor(c.ftID);a.$14=c===!0;d!==a.$14&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()}));this.$2=c};c.$33=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubFlyoutTitlebar")[0]};c.$23=function(){return this.$1&&b("DOM").scry(this.$1,".fbNubButton")[0]};c.$28=function(){!this.$3&&this.$1&&(this.$3=b("DOM").scry(this.$1,".uiScrollableAreaWrap")[0]);return this.$3};c.$31=function(){!this.$4&&this.$1&&(this.$4=b("DOM").scry(this.$1,".fbNubFlyoutBodyContent")[0]);return this.$4};c.$37=function(){var a=this.$23();return a?b("DOM").scry(a,"._37op")[0]:null};c.$27=function(){b("ConversationNubUtils").informShouldCloseTab(this.$12,this.getFeedbackTargetID(),b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT)};c.$36=function(a){j(this,a)};c.$34=function(){this.$1&&b("CSS").addClass(this.$1,"_1uw3")};c.$35=function(){this.$1&&b("CSS").removeClass(this.$1,"_1uw3")};c.$24=function(){this.getPersistentState().isTabRaised?j(this,!0):k(this,!0)};c.$25=function(){this.getPersistentState().isBlinkingUnread&&(this.$9=new Date())};c.$26=function(){var a=this.$9;if(a&&this.getPersistentState().isBlinkingUnread){var b=new Date();b-a>=n&&this.$19(!1)}this.$9=null};c.$38=function(){var a=this.$28();if(a){var b=a.scrollHeight;b>0&&!this.$39(a)&&(this.$8=!0,a.scrollTop=b)}};c.$39=function(a){a=a||this.$28();return!!(a&&a.scrollTop>=a.scrollHeight-a.clientHeight-m)};c.$29=function(){var a=this;if(!l.getTabStateIfExists(this.$12)||!this.getPersistentState().isTabRaised)return;l.modifyTabState(this.$12,function(c){c.keepAtBottom=a.$39(),b("ConversationNubUtils").informShouldRecheckTabVisibility(a)});this.$8||this.clearJewelNotifications();this.$8=!1};c.$32=function(a){if(this.$13===a)return;this.$13=a;this.$13&&this.clearJewelNotifications();b("ConversationNubTabsUpdateEventController").informTabsUpdated()};c.getIsFocused=function(){return this.$13};c.getPageID=function(){return this.$15};c.getHasText=function(){return this.$14};c.$30=function(){var a=this,c=this.getPersistentState();if(!c.isTabRaised)return;c.keepAtBottom&&(this.$38(),this.$7&&b("clearTimeout")(this.$7),this.$7=b("setTimeoutAcrossTransitions")(function(){c.keepAtBottom&&a.$38()},100))};c.$18=function(a){var b=this;l.modifyTabState(this.$12,function(c){c.badgeCount=a,b.$21()})};c.$19=function(a){var b=this;l.modifyTabState(this.$12,function(c){c.isBlinkingUnread=a,b.$22()})};c.$21=function(){var a=this.$37();if(!a)return;var c=this.getPersistentState().badgeCount,d=c>0;d?(b("DOM").setContent(a,c),b("CSS").show(a)):(b("CSS").hide(a),b("DOM").setContent(a,c))};c.$22=function(){if(this.$1){var a=this.getPersistentState().isBlinkingUnread;this.$1&&b("CSS").conditionClass(this.$1,"_53tf",a)}};c.getRootDOM=function(){return this.$1};c.getShouldShowIntroNux=function(){return this.$10};c.getShouldShowHideNux=function(){return this.$11};c.getTabID=function(){return this.$12};c.getNotificationPayloadAlertID=function(){return this.getPersistentState().notifAlertID};c.getNotificationType=function(){return this.getPersistentState().notificationType};c.setNotificationType=function(a){l.modifyTabState(this.$12,function(b){b.notificationType=a})};c.getFeedbackTargetID=function(){return this.getPersistentState().ftID};c.getPermalinkURI=function(){return this.getPersistentState().permalinkURI};c.getTitle=function(){return this.getPersistentState().title};c.getBadgeCount=function(){return this.getPersistentState().badgeCount};c.getIsRaised=function(){return this.getPersistentState().isTabRaised};c.getSessionID=function(){return this.$5};c.markCommentsAsSeenWithoutBadging=function(a){l.modifyTabState(this.$12,function(b){a.forEach(function(a){b.allSeenNewComments[a]=!0})})};c.attemptAddNewCommentsToBadge=function(a){var b=this;l.modifyTabState(this.$12,function(c){a.forEach(function(a){if(c.allSeenNewComments[a])return;c.allSeenNewComments[a]=!0;c.unseenCommentsSinceLastCleared[a]=!0});var d=Object.keys(c.unseenCommentsSinceLastCleared).length;c.hasFakeInitBadge&&(d+=1);var e=c.badgeCount;b.$18(d);b.$19(d>0&&d>e)})};c.clearBadge=function(){l.clearTabNotifications(this.$12),this.$21(),this.$22()};c.clearJewelNotifications=function(){var a=this.getNotificationPayloadAlertID();a!=null&&b("NotificationUserActions").markNotificationsAsRead([a])};c.popOutAndInformTabUpdate=function(){this.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};c.popOut=function(){var a=this;l.modifyTabState(this.$12,function(c){a.$1&&b("CSS").addClass(a.$1,"_5r93"),c.isTabRaised=!0,a.clearBadge(),c.keepAtBottom&&a.$38()})};c.minimize=function(){var a=this;l.modifyTabState(this.$12,function(c){a.$1&&b("CSS").removeClass(a.$1,"_5r93"),c.isTabRaised=!1,a.$2&&a.$2.hideMenu(),a.clearBadge()})};c.forceReflow=function(){this.$30()};c.isFormForThisUFI=function(a){return this.$1&&b("containsNode")(this.$1,a)};c.destroy=function(){this.$6.release(),this.$2&&this.$2.destroy(),this.$2=null,this.$7&&b("clearTimeout")(this.$7),this.minimize(),this.$1&&(b("DOM").remove(this.$1),b("Arbiter").inform("ConversationNub/destroy",{root:this.$1}),this.$1=null)};return a}();e.exports=a}),null);
__d("XConversationNubActionTakenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/action_taken/",{})}),null);
__d("ConversationNubActionTakenReporter",["Arbiter","AsyncRequest","ConversationNubUtils","PinnedConversationNubsActionTaken","SubscriptionsHandler","XConversationNubActionTakenController"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.$2=function(c,d){d.tabID;c=d.ftID;d.tabState;d.sessionID;d=d.reason;(d===b("ConversationNubUtils").CLOSE_REASON_TAB_X_OUT||d===b("ConversationNubUtils").CLOSE_REASON_OVERFLOW_X_OUT||d===b("ConversationNubUtils").CLOSE_REASON_UNPIN)&&a.$3(c,b("PinnedConversationNubsActionTaken").TAB_CLOSED_BY_USER)};this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,this.$2))}var c=a.prototype;c.destroy=function(){this.$1.release()};c.$3=function(a,c){var d=b("XConversationNubActionTakenController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({ft_id:a,action:c}).setAllowCrossPageTransition(!0).send()};return a}();e.exports=a}),null);
__d("ConversationNubHeader",["csx","ArbiterMixin","Bootloader","ConversationNubUtils","DOM","Event","EventListener","Keys","SubscriptionsHandler","ifRequired","mixin"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){return b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&c(a)})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$ConversationNubHeader6=!1;e.$ConversationNubHeader1=c;e.$ConversationNubHeader3=d;e.$ConversationNubHeader4=null;e.$ConversationNubHeader5=!1;e.$ConversationNubHeader2=new(b("SubscriptionsHandler"))();e.$ConversationNubHeader7();return e}var d=c.prototype;d.$ConversationNubHeader7=function(){var a=this.$ConversationNubHeader1;this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader8.bind(this)));a=b("ConversationNubUtils").getCloseButtonElem(a);a&&b("ConversationNubUtils").addCloseButtonListeners(a,this.$ConversationNubHeader2,this.$ConversationNubHeader9.bind(this));a=this.$ConversationNubHeader10();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader11.bind(this)),h(a,this.$ConversationNubHeader11.bind(this)));a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader2.addSubscriptions(b("EventListener").listen(a,"click",this.$ConversationNubHeader13.bind(this)),b("EventListener").listen(a,"mouseover",this.$ConversationNubHeader14.bind(this)),b("EventListener").listen(a,"focus",this.$ConversationNubHeader15.bind(this)),h(a,this.$ConversationNubHeader16.bind(this)))};d.$ConversationNubHeader12=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._1rf1")[0]};d.$ConversationNubHeader10=function(){return b("DOM").scry(this.$ConversationNubHeader1,"._4a56")[0]};d.$ConversationNubHeader9=function(){this.inform("closeButton")};d.$ConversationNubHeader11=function(a){a.type==="click"&&a.kill(),this.inform("minimizeButton")};d.$ConversationNubHeader8=function(){this.inform("clickHeader")};d.$ConversationNubHeader17=function(){this.inform("showMenu")};d.$ConversationNubHeader18=function(){this.inform("hideMenu");var a=this.$ConversationNubHeader12();a&&a.blur()};d.$ConversationNubHeader19=function(){this.inform("menuPermalinkClick")};d.$ConversationNubHeader20=function(a){var c=this;if(this.$ConversationNubHeader4)return;var d=this.$ConversationNubHeader12();if(!d)return;a&&(this.$ConversationNubHeader5=!0);b("Bootloader").loadModules(["React","ReactDOM","ConversationNubHeaderMenu.react"],function(a,b,e){if(c.$ConversationNubHeader6)return;var f=babelHelpers["extends"]({},c.$ConversationNubHeader3(),{onMenuShow:c.$ConversationNubHeader17.bind(c),onMenuHide:c.$ConversationNubHeader18.bind(c),onPermalinkClick:c.$ConversationNubHeader19.bind(c),showOnMount:c.$ConversationNubHeader5});c.$ConversationNubHeader4=b.render(a.jsx(e,babelHelpers["extends"]({},f)),d)},"ConversationNubHeader")};d.$ConversationNubHeader13=function(a){a.kill(),this.$ConversationNubHeader20(!0)};d.$ConversationNubHeader14=function(){this.$ConversationNubHeader20(!1)};d.$ConversationNubHeader15=function(){this.$ConversationNubHeader20(!1)};d.$ConversationNubHeader16=function(){this.$ConversationNubHeader4?this.$ConversationNubHeader4.toggle():this.$ConversationNubHeader20(!0)};d.hideMenu=function(){this.$ConversationNubHeader4&&this.$ConversationNubHeader4.hide()};d.destroy=function(){this.$ConversationNubHeader6=!0;var a=this.$ConversationNubHeader12();a&&this.$ConversationNubHeader4&&b("ifRequired")("ReactDOM",function(b){b.unmountComponentAtNode(a)});this.$ConversationNubHeader2.release()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ConversationNubTabsUpdateEventController",["Arbiter","ConversationNubUtils"],(function(a,b,c,d,e,f){"use strict";var g="ConversationNub/tabsUpdated",h="ConversationNub/minimizedByUser",i="ConversationNub/maximizedByUser",j=!1;function k(a){j||b("Arbiter").inform(g,a)}function a(a){return b("Arbiter").subscribe(g,function(b,c){j=!0,a(c),j=!1})}function c(a,c){c&&b("Arbiter").inform(h,{tab:a}),a.minimize(),k()}function d(a,c){if(!c&&!b("ConversationNubUtils").allowProgrammaticPopOut())return;c&&b("Arbiter").inform(i,{tab:a});a.popOut();k()}e.exports={TAB_MINIMIZED_BY_USER_EVENT:h,TAB_MAXIMIZED_BY_USER_EVENT:i,informTabsUpdated:k,subscribeToTabsUpdated:a,minimizeAndInformTabUpdate:c,popOutAndInformTabUpdate:d}}),null);
__d("XConversationNubTogglePinController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/nub_story/toggle_pin/",{ft_id:{type:"String"},pin:{type:"Bool",defaultValue:!1},with_render:{type:"Bool",defaultValue:!1},notif_setting:{type:"Enum",enumType:1}})}),null);
__d("XConversationsToggleController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/conversation/toggle_feature/",{turn_conversations_on:{type:"Bool",defaultValue:!1}})}),null);
__d("isGamesURI",["isFacebookURI"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("isFacebookURI")(a)&&a.getPath().startsWith("/games")}e.exports=a}),null);
__d("ConversationNubUtils",["csx","Arbiter","AsyncRequest","ConversationNubTabState","DOM","Event","EventListener","Keys","NotificationConversationController","URI","XConversationNubTogglePinController","XConversationsToggleController","isBusinessURI","isCanvasAppURI","isGamesURI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("ConversationNubTabState"),j=Object.freeze({DISABLE:"disable",ENABLE:"enable"}),k="ConversationNubUtils/closeTab",l="ConversationNubUtils/unpinnedFromHeader",m="ConversationNubUtils/recheckTabVisibility",n="ConversationNubUtils/openPermalinkFromHeader",o="ConversationNubUtils/turnOff",p="ConversationNubUtils/turnOn",q="tab-x-out",r="browser-tab-sync",s="overflow-x-out",t="unpin";function a(a){var b=Object.values(j);return b.find(function(b){return b===a})||null}function u(a,c,d,e){e=e||{};e=e.notif_setting;a=b("XConversationNubTogglePinController").getURIBuilder().setString("ft_id",String(a)).setBool("pin",c);e&&a.setEnum("notif_setting",e);c=a.getURI();e=new(b("AsyncRequest"))().setURI(c).setMethod("POST");d&&e.setAllowCrossPageTransition(!0);e.send()}function v(a){var c=b("XConversationsToggleController").getURIBuilder().setBool("turn_conversations_on",a).getURI();a?I():H();c=new(b("AsyncRequest"))().setURI(c).setAllowCrossPageTransition(!0).setHandler(function(a){a.getPayload().conversationsStatus?I():H()}).setErrorHandler(function(b){a?H():I()}).setMethod("POST");c.send()}function w(a,b,c){u(a,!0,b,c)}function x(a,b,c){u(a,!1,b,c)}function c(a,b){w(a,!1,b)}function d(a,b){x(a,!1,b)}function f(a,b){w(a,!0,b)}function g(a,b){x(a,!0,b)}function y(){v(!1),b("NotificationConversationController").deleteAllTabs()}function z(){v(!0)}function A(a){return b("DOM").scry(a,"._4iz6")[0]}function B(a,c,d){var e=function(){d()};c.addSubscriptions(b("EventListener").listen(a,"click",e),b("EventListener").listen(a,"keydown",function(a){b("Event").getKeyCode(a)===b("Keys").RETURN&&e()}))}function C(){var a=(h||(h=b("URI"))).getRequestURI();return!b("isCanvasAppURI")(a)&&!b("isBusinessURI")(a)&&!b("isGamesURI")(a)}function D(a,c,d){var e=i.getLoadedTab(a);if(!e)return;var f=e.getPersistentState(),g=e.getSessionID();e=e.getPageID();b("Arbiter").inform(k,{tabID:a,ftID:c,tabState:f,sessionID:g,reason:d,pageID:e})}function E(a){a=i.getLoadedTab(a);if(!a)return;b("Arbiter").inform(l,{tab:a})}function F(a){b("Arbiter").inform(m,{tab:a})}function G(a){if(a==null)return;a=i.getLoadedTab(a);if(!a)return;b("Arbiter").inform(n,{tab:a})}function H(){b("Arbiter").inform(o,{})}function I(){b("Arbiter").inform(p,{})}e.exports={CLOSE_TAB_EVENT:k,UNPIN_FROM_HEADER_EVENT:l,OPEN_PERMALINK_FROM_HEADER_EVENT:n,TURN_CONVERSATIONS_OFF_EVENT:o,TURN_CONVERSATIONS_ON_EVENT:p,CLOSE_REASON_TAB_X_OUT:q,CLOSE_REASON_SYNCHRONIZED_FROM_OTHER_TAB:r,CLOSE_REASON_OVERFLOW_X_OUT:s,CLOSE_REASON_UNPIN:t,coerceToPinRequestNotifSetting:a,sendPinRequest:c,sendUnpinRequest:d,sendPinRequestAcrossTransitions:f,sendUnpinRequestAcrossTransitions:g,getCloseButtonElem:A,addCloseButtonListeners:B,informShouldCloseTab:D,informDidUnpinFromHeaderMenu:E,informShouldRecheckTabVisibility:F,informOpenPermalinkFromHeader:G,allowProgrammaticPopOut:C,turnConversationsOff:y,turnConversationsOn:z}}),null);
__d("ConversationNubPermalinkUtils",["URI","isFacebookURI"],(function(a,b,c,d,e,f){"use strict";var g;function h(a){return a.substr(-1)==="/"?a.slice(0,-1):a}function i(a,b){a=a.getPath();b=b.getPath();return h(a)===h(b)}function j(a,b,c){a=a.getQueryData();b=b.getQueryData();a=a[c];b=b[c];return a==null&&b==null?!0:a===b}function a(a){var c=new(g||(g=b("URI")))(window.location.href);return c&&a&&b("isFacebookURI")(c)&&b("isFacebookURI")(a)&&i(c,a)&&j(c,a,"fbid")&&j(c,a,"story_fbid")}e.exports={isOnPermalink:a}}),null);
__d("ConversationNubViewportManager",["DockTabsViewportCalculator","DockTabsViewportPinnedConversationTabUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab;a=function(){function a(a,c,d){var e=this;this.$1=a;this.$3=c;this.$2=b("DockTabsViewportCalculator").getInstance(this.$1);this.$2&&this.$2.registerPinnedConvoTabCallbacks(babelHelpers["extends"]({},d,{pinnedConvoTabStateGetter:function(){return e.$3}}))}var c=a.prototype;c.getNumDockTabsToShow=function(a){return this.getCouldFitAtLeastOneDockTab(a)?1:0};c.getCouldFitAtLeastOneDockTab=function(a){var b=g();return b<=a};c.forceRecalculatePinnedConvoTabs=function(a){this.$2&&this.$2.forceRecalculatePinnedConvoTabs(a)};return a}();e.exports=a}),null);
__d("ConversationNubVisibilityDedupeUtils",["Bootloader","emptyFunction","ifRequired"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["UFICommentVisibilityStore"],a,"ConversationNubVisibilityDedupeUtils")}function c(a){return b("ifRequired")("UFICommentVisibilityStore",function(b){return b.isFeedbackTargetVisible(a)},b("emptyFunction").thatReturnsFalse)}e.exports={bootloadUFIVisibilityModule:a,isFeedbackTargetVisible:c}}),null);
__d("XNotificationNubStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/conversation/nub_story/",{notif_alert_id:{type:"String"},notif_id:{type:"Int"},ft_id:{type:"String"},force_minimized:{type:"Bool",defaultValue:!1}})}),null);
__d("NotificationConversationController",["csx","cx","Arbiter","AsyncRequest","Bootloader","ConversationNub","ConversationNubActionTakenReporter","ConversationNubPermalinkUtils","ConversationNubTabState","ConversationNubTabsUpdateEventController","ConversationNubUtils","ConversationNubViewportManager","ConversationNubVisibilityDedupeUtils","CSS","DOM","PinnedConversationNubsConfig","SubscriptionsHandler","URI","XNotificationNubStoryController","ge","ifRequired","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("ConversationNubVisibilityDedupeUtils").isFeedbackTargetVisible,k=1,l=b("ConversationNubTabState"),m=Object.create(null),n=null,o=null,p=null,q=null,r=null,s=null,t=!1,u=null,v=null,w=null,x=Object.create(null);function y(){o||(o=b("DOM").scry(b("ge")("pagelet_dock"),"._1mw-")[0]);return o}function z(){if(!p){var a=y();a&&(p=b("DOM").scry(a,"._1tvj")[0])}return p}function A(){if(!q){var a=y();a&&(q=b("DOM").scry(a,"._2ikx .fbNubButton")[0])}return q}a=function(){function a(){}var c=a.prototype;c.init=function(){var a=this;if(t)return;t=!0;var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("ConversationNubTabsUpdateEventController").subscribeToTabsUpdated(this.$2.bind(this)),b("Arbiter").subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(b,c){b=c||{};c=b.tabID;c&&a.$3(c)}));this.$1=new(b("ConversationNubActionTakenReporter"))();u=c};c.$4=function(a){a=n?n.getNumDockTabsToShow(a):k;l.setMaxDockTabs(a)};c.$5=function(a,c){this.$4(a);if(c){var d=c.tabToPromote;c=c.tabToOpenIfInDock;d&&!l.isTabInDock(d.getTabID())&&l.moveTabToDockLeft(d.getTabID());b("ConversationNubUtils").allowProgrammaticPopOut()&&c&&l.isTabInDock(c.getTabID())&&c.popOut()}this.$6(a)};c.$2=function(a){n&&n.forceRecalculatePinnedConvoTabs(a)};c.$6=function(a){var c=l.getTotalTabCount(),d=l.getNumDockTabs();a=n?n.getCouldFitAtLeastOneDockTab(a):!1;a=c>0&&a;d=d<c&&a;c=y();c&&(b("CSS").conditionClass(c,"_1tvf",a),b("CSS").conditionClass(c,"_1dex",d),b("CSS").conditionClass(c,"_1tvi",d));a=b("PinnedConversationNubsConfig").pinnedToLeft?l.getTabsForDockOldestFirst():l.getTabsForDockNewestFirst();a.forEach(function(a){a.getIsRaised()&&a.clearBadge()});c=l.getTabsForMenuNewestFirst();this.$7(a);this.$8(c)};c.handleNotificationsRead=function(a){this.init();l.getUnsortedLoadedTabs().forEach(function(b){var c=b.getNotificationPayloadAlertID();c&&a[c]&&b.clearBadge()});l.getUnloadedTabs().forEach(function(b){b.notifAlertID&&a[b.notifAlertID]&&l.clearTabNotifications(b.tabID)});var b=l.getTabsForMenuNewestFirst();this.$8(b)};c.handleNewNotificationFromGraphQL=function(a,c){var d;this.init();a=(d=b("nullthrows"))(a);var e=a.tab_id,f=a.notification,g=a.feedback_target_id;a=a.permalink_uri;f=d(f);var h=f.notif_id,j=f.alert_id;f=f.notif_type;this.$9(d(e),d(h),d(g),d(j),a?new(i||(i=b("URI")))(a):null,c,f)};c.$9=function(a,c,d,e,f,g,h){e=b("XNotificationNubStoryController").getURIBuilder().setString("notif_alert_id",e).setInt("notif_id",c);this.$10(d,g);this.$11(a,d,h,f,e)};c.$10=function(a,b){x[a]||(x[a]=b)};c.$11=function(a,c,d,e,f){if(m[a])return;var g=l.getLoadedTab(a);if(g){d&&g.setNotificationType(d);return}(b("ConversationNubPermalinkUtils").isOnPermalink(e)||j(c))&&f.setBool("force_minimized",!0);m[a]=!0;new(b("AsyncRequest"))().setURI(f.getURI()).setAllowCrossPageTransition(!0).setFinallyHandler(function(){delete m[a]}).send()};c.$12=function(a){var c=!0;l.getUnsortedLoadedTabs().forEach(function(b){var d=b.getFeedbackTargetID(),e=a[d];e=e?Object.keys(e):[];if(e.length){var f=b.getBadgeCount();j(d)?(b.markCommentsAsSeenWithoutBadging(e),b.clearBadge()):b.attemptAddNewCommentsToBadge(e);d=b.getBadgeCount();f!==d&&(c=!0)}});c&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};c.$13=function(a,c,d){if(w){w.addTab(a,d);delete x[a.getPersistentState().ftID];return}b("Bootloader").loadModules(["ConversationNubLogger"],function(b){w||(w=new b(c)),w.addTab(a,d),delete x[a.getPersistentState().ftID]},"NotificationConversationController")};c.$14=function(){var a=this;if(v)return;b("Bootloader").loadModules(["ConversationNubUFICentralUpdateManager"],function(b){if(v)return;v=new b(a.$12.bind(a))},"NotificationConversationController")};c.$7=function(a){var c=z();if(!c)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubDockedTabGroup.react"],function(b,d,e){s=d.render(b.jsx(e,{dockTabs:a}),c)},"NotificationConversationController")};c.$15=function(a){a.popOut(),b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:a})};c.$8=function(a){var c=this,d=A();if(!d)return;b("Bootloader").loadModules(["React","ReactDOM","ConversationNubCollapsedSelectorMenu.react"],function(b,e,f){r=e.render(b.jsx(f,{menuTabs:a,onTabSelected:c.$15}),d)},"NotificationConversationController")};c.$16=function(){if(!n){var a=y();if(a){var c={onAvailableWidthChanged:this.$5.bind(this)};n=new(b("ConversationNubViewportManager"))(a,l,c)}}};c.storyFromServer=function(a,c){t||this.init();var d=c.attempt_open_on_init,e=c.ft_id,f=c.init_without_badge,g=c.notif_alert_id,h=c.notification_type,i=c.permalink_uri,k=c.promote_on_init,m=c.tab_add_source,n=c.tab_id,o=c.title,p=c.should_show_intro_nux,q=c.should_show_hide_nux;c=c.page_id;var r=l.getLoadedTab(n);if(r){(k||d)&&b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:k?r:null,tabToOpenIfInDock:d?r:null});return}f=f||j(e);r=l.getTabStateIfExists(n);if(r)f=null;else{r=b("ConversationNub").createDefaultState(n,i,e,g,h,o);l.addTabState(r)}i=new(b("ConversationNub"))(a,n,f,c,Boolean(p),Boolean(q));l.addLoadedTab(n,i);d=d||i.getPersistentState().isTabRaised;this.$14();this.$16();b("ConversationNubTabsUpdateEventController").informTabsUpdated({tabToPromote:k?i:null,tabToOpenIfInDock:d?i:null});g=x[e]||m||"unknown";this.$13(i,l,g)};c.deleteAllTabs=function(){l.deleteAllTabs(),b("ConversationNubTabsUpdateEventController").informTabsUpdated()};c.$3=function(a){a=l.deleteTab(a);a&&b("ConversationNubTabsUpdateEventController").informTabsUpdated()};c.unsubscribe=function(){u&&u.release(),u=null,w&&w.destroy(),w=null,v&&v.destroy(),v=null,this.$1.destroy(),b("ifRequired")("ReactDOM",function(a){var b=A();r&&b&&a.unmountComponentAtNode(b);b=z();s&&b&&a.unmountComponentAtNode(b)})};return a}();e.exports=new a()}),null);
__d("PinnedConversationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAttemptOpenOnInit=function(a){this.$1.attempt_open_on_init=a;return this};c.setBadgeCount=function(a){this.$1.badge_count=a;return this};c.setClientEventTimeMs=function(a){this.$1.client_event_time_ms=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFtID=function(a){this.$1.ft_id=a;return this};c.setIsRaised=function(a){this.$1.is_raised=a;return this};c.setNotificationType=function(a){this.$1.notification_type=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPromoteOnInit=function(a){this.$1.promote_on_init=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setTabID=function(a){this.$1.tab_id=a;return this};c.setTabSessionID=function(a){this.$1.tab_session_id=a;return this};c.setTabsInDock=function(a){this.$1.tabs_in_dock=a;return this};c.setTabsInMenu=function(a){this.$1.tabs_in_menu=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.setWindowInnerHeight=function(a){this.$1.window_inner_height=a;return this};c.setWindowInnerWidth=function(a){this.$1.window_inner_width=a;return this};return a}();c={attempt_open_on_init:!0,badge_count:!0,client_event_time_ms:!0,event:!0,ft_id:!0,is_raised:!0,notification_type:!0,page_id:!0,promote_on_init:!0,reason:!0,tab_id:!0,tab_session_id:!0,tabs_in_dock:!0,tabs_in_menu:!0,time:!0,vc:!0,weight:!0,window_inner_height:!0,window_inner_width:!0};e.exports=a}),null);
__d("ConversationNubLogger",["Arbiter","ConversationNubTabsUpdateEventController","ConversationNubUtils","PinnedConversationTypedLogger","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=new(b("SubscriptionsHandler"))(),this.$2=a,this.$3()}var c=a.prototype;c.$3=function(){var a=this,c;this.$1.addSubscriptions((c=b("Arbiter")).subscribe(b("ConversationNubUtils").CLOSE_TAB_EVENT,function(c,d){c=d.tabState;var e=d.sessionID;d=d.reason;d=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_close").setReason(d);a.$4(d,c,e)}));this.$1.addSubscriptions(c.subscribe(b("ConversationNubUtils").UNPIN_FROM_HEADER_EVENT,function(c,d){c=d.tab;d=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_hide");a.$5(d,c)}));this.$1.addSubscriptions(c.subscribe(b("ConversationNubTabsUpdateEventController").TAB_MAXIMIZED_BY_USER_EVENT,function(c,d){c=d.tab;d=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_maximize");a.$5(d,c)}));this.$1.addSubscriptions(c.subscribe(b("ConversationNubTabsUpdateEventController").TAB_MINIMIZED_BY_USER_EVENT,function(c,d){c=d.tab;d=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_minimize");a.$5(d,c)}));this.$1.addSubscriptions(c.subscribe(b("ConversationNubUtils").OPEN_PERMALINK_FROM_HEADER_EVENT,function(c,d){c=d.tab;d=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_open_permalink_from_header");a.$5(d,c)}))};c.$5=function(a,b){a.setTabID(b.getTabID()).setPageID(b.getPageID()).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight);a.setFtID(b.getFeedbackTargetID()).setIsRaised(b.getIsRaised()).setBadgeCount(b.getBadgeCount()).setTabSessionID(b.getSessionID());b=b.getNotificationType();b!=null&&a.setNotificationType(b);a.log()};c.$4=function(a,b,c){a.setTabID(b.tabID).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$2.getNumMenuTabs()).setTabsInDock(this.$2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight),a.setFtID(b.ftID).setIsRaised(b.isTabRaised).setBadgeCount(b.badgeCount).setTabSessionID(c),b.notificationType!=null&&a.setNotificationType(b.notificationType),a.log()};a.subscriptionTriggered=function(a){new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_subscription_triggered").setReason(a).log()};c.addTab=function(a,c){c=new(b("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_add").setReason(c);this.$5(c,a)};c.destroy=function(){this.$1.release()};return a}();e.exports=a}),null);
__d("ConversationNotificationListeners",["Bootloader","ConversationNubLogger","FacebookWebNotificationsSubscription","NotificationConstants","NotificationUpdates","once"],(function(a,b,c,d,e,f){"use strict";var g=b("NotificationConstants").PayloadSourceType.LIVE_SEND;function h(){b("NotificationUpdates").subscribe("update-notifications",function(a,c){c.payloadsource===g&&c.readState&&Object.keys(c.readState).length&&b("Bootloader").loadModules(["NotificationConversationController"],function(a){a.handleNotificationsRead(c.readState)},"ConversationNotificationListeners")})}var i=b("once")(function(){h(),b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_PINNED_CONVERSATION",callback:function(a){b("ConversationNubLogger").subscriptionTriggered("graphql"),b("Bootloader").loadModules(["NotificationConversationController"],function(b){b.handleNewNotificationFromGraphQL(a,"notification")},"ConversationNotificationListeners")}})});e.exports={initialize:function(){i()}}}),null);
__d("XGamesReplaceableXOutAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/async/xout/replace/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},extra_data:{type:"String"},query_type:{type:"String"},query_params:{type:"String"},excluded_app_ids:{type:"StringVector",defaultValue:[]},attributes:{type:"String"}})}),null);
__d("GamesReplaceableXOutHelper",["invariant","Parent","XGamesReplaceableXOutAsyncController"],(function(a,b,c,d,e,f,g){var h="data-games-xout-container",i=0,j={},k={};function l(a){a=b("Parent").byAttribute(a,h);if(a){var c=parseInt(a.getAttribute(h),10);c===0&&(i+=1,c=i.toString(),a.setAttribute(h,c));return c}}function m(a){a=l(a);a||g(0,4728);return a}function n(a){a=j[m(a)];return a?Object.keys(a):[]}function a(a,b){return o(a,[b])}function o(a,b){a=l(a);if(a){a=j[a]=j[a]||{};for(var c=0;c<b.length;c+=1)a[b[c]]=!0}}function c(a){a=m(a);a&&(delete j[a],delete k[a])}function d(a,c){return b("XGamesReplaceableXOutAsyncController").getURIBuilder().setInt("app_id",c.appID).setString("extra_data",c.extraData).setString("attributes",c.attributes).setString("query_type",a.getAttribute("data-games-xout-query-type")).setString("query_params",a.getAttribute("data-games-xout-query-params")).setString("unit_type",c.unitType).setInt("fbs",a.getAttribute("data-games-xout-fbs")).setStringVector("excluded_app_ids",n(a)).getURI()}function f(a,b){a=l(a);if(!a)return;a=k[a]=k[a]||[];a.length===0&&b();a.push(b)}function p(a){a=m(a);a=k[a];a&&(a.shift(),a.length>0&&a[0]())}a={getBoundAppIDs:n,registerAppID:a,registerAppIDs:o,deleteContainer:c,queueRequest:f,processQueuedRequests:p,createURI:d};e.exports=a}),null);
__d("GamesReplaceableXOutListener",["csx","cx","AsyncRequest","CSS","DOM","Event","GamesReplaceableXOutHelper","Parent"],(function(a,b,c,d,e,f,g,h){var i={};function j(a,c,d){d=d.payload;if(!d)return;b("GamesReplaceableXOutHelper").registerAppID(a,d.app_id);b("GamesReplaceableXOutHelper").processQueuedRequests(c);i[d.app_id]=d.item_data;b("DOM").replace(c,d.el)}function k(a){return b("Event").listen(a,"click",function(c){c=c.target;if(!b("CSS").matchesSelector(c,"._1m6e"))return;var d=b("Parent").bySelector(c,"._2b2u"),e=c.getAttribute("data-appid"),f=i[e];b("CSS").addClass(d,"_4ksu");b("GamesReplaceableXOutHelper").queueRequest(d,function(){new(b("AsyncRequest"))(b("GamesReplaceableXOutHelper").createURI(a,f)).setHandler(function(b){return j(a,d,b)}).setMethod("POST").send(),delete i[e]})})}a={registerContainerItems:function(a,c,d){b("GamesReplaceableXOutHelper").registerAppIDs(a,c),d.forEach(function(c){var d=c.appID;i[d]=c;b("GamesReplaceableXOutHelper").registerAppID(a,d)}),k(a,c)}};e.exports=a}),null);
__d("XGamesHideableXOutAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/games/async/xout/hide/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},extra_data:{type:"String"}})}),null);
__d("GamesUninstallXOut.react",["cx","AsyncRequest","CSS","Dialog","DOMContainer.react","GamesXOut.react","React","ReactDOM","URI","XGamesHideableXOutAsyncController","prop-types"],(function(a,b,c,d,e,f,g){var h,i=b("React");a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={pending:!1},d.$1=function(){var a=b("XGamesHideableXOutAsyncController").getURIBuilder().setInt("app_id",d.props.appID).setString("extra_data",d.props.extraData).setString("unit_type",d.props.unitType).setInt("fbs",d.props.fbs).getURI();d.$2=new(b("AsyncRequest"))(a).setMethod("POST");d.$2.send()},d.$3=function(){var a=new(h||(h=b("URI")))("/ajax/settings/apps/delete_app.php").setQueryData({app_id:d.props.appID,legacy:!1,dialog:!0,xout:!0});new(b("Dialog"))().setAsync(new(b("AsyncRequest"))(a).setRelativeTo(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d)))).setCausalElement(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).show()},c)||babelHelpers.assertThisInitialized(d)}c.appUninstalled=function(a){b("CSS").addClass(a,"_4ksu")};var d=c.prototype;d.render=function(){return i.jsx(b("GamesXOut.react"),{onClick:this.$3,children:i.jsx(b("DOMContainer.react"),{children:this.props.domChild})})};return c}(i.Component);a.propTypes={unitType:(c=b("prop-types")).string.isRequired,appID:c.string.isRequired,domChild:c.any.isRequired,extraData:c.string.isRequired,fbs:c.number.isRequired};e.exports=a}),null);
__d("XPymkFunnelLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:!0},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:!0},ref:{type:"String"},action:{type:"Enum",required:!0,enumType:1}})}),null);
__d("PymkFunnelLogger",["AsyncRequest","DOMQuery","XPymkFunnelLoggingController"],(function(a,b,c,d,e,f){a={setupListeners:function(a,b,c,d,e){this._setupForSingleElement(a,b,c,"add"),this._setupForSingleElement(a,b,d,"click"),this._setupForSingleElement(a,b,e,"click")},logImpression:function(a,b,c){this._logEvent(a,"impression",b,c)},logXOut:function(a,b,c){this._logEvent(a,"hide",b,c)},_logEvent:function(a,c,d,e){a=b("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",a).setInt("signature",d).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",c).setString("loc",e).getURI();new(b("AsyncRequest"))(a).setMethod("POST").send()},_setupForSingleElement:function(a,c,d,e){Event.listen(d,"click",function(d){d=a.getAttribute("data-signature");var f=b("DOMQuery").find(a,"input.friendBrowserID");f=parseInt(f.value,10);this._logEvent(f,e,d,c)}.bind(this))}};e.exports=a}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:!0},log_event:{type:"String",required:!0}})}),null);
__d("FriendRequestIHEventLogger",["AsyncRequest","Event","XFriendRequestIHEventLoggingController"],(function(a,b,c,d,e,f){a={setupJewelListeners:function(a,b,c){this._setupForJewelSingleElement(a,b,"click"),c&&this._setupForJewelSingleElement(a,c,"click")},logImpression:function(a){this._logEvent(a,"impression")},_logEvent:function(a,c){if(isNaN(a))return;a=b("XFriendRequestIHEventLoggingController").getURIBuilder().setFBID("target_id",a).setString("log_event",c).getURI();new(b("AsyncRequest"))(a).setMethod("POST").send()},_setupForJewelSingleElement:function(a,c,d){b("Event").listen(c,"click",function(b){b=a.getAttribute("id");if(b==null)return;b=b.substring(0,b.length-6);this._logEvent(b,d)}.bind(this))}};e.exports=a}),null);
__d("WebFriendingRequests",["Arbiter","DOM","Event","FriendRequestIHEventLogger","MarauderLogger","PymkFunnelLogger","Vector","debounceCore"],(function(a,b,c,d,e,f){a={init:function(a,c){this._pymkBox=a;this._lastPymkSeen=-1;this._recordPYMKImpression();b("Event").listen(window,"scroll",b("debounceCore")(this._recordPYMKImpression.bind(this),100));b("Event").listen(window,"resize",b("debounceCore")(this._recordPYMKImpression.bind(this),100));b("Arbiter").subscribe("pymk-x-out",this._handleXout.bind(this));this._requestsBox=c;if(!this._requestsBox)return;this._lastRequestSeen=-1;this._recordFriendRequestImpression();b("Event").listen(window,"scroll",b("debounceCore")(this._recordFriendRequestImpression.bind(this),100));b("Event").listen(window,"resize",b("debounceCore")(this._recordFriendRequestImpression.bind(this),100))},_recordPYMKImpression:function(){var a=b("DOM").scry(this._pymkBox,"li.friendBrowserListUnit"),c=b("Vector").getViewportDimensions().y,d=a.length-1;while(d>this._lastPymkSeen){var e=b("Vector").getElementPosition(a[d],"viewport").y;if(e>0&&e+b("Vector").getElementDimensions(a[d]).y<=c)break;d-=1}e=d;while(d>this._lastPymkSeen)this.logPYMKImpression(a[d],"friends_center"),d-=1;this._lastPymkSeen=Math.max(this._lastPymkSeen,e)},_recordFriendRequestImpression:function(){var a=b("DOM").scry(this._requestsBox,"div.friendRequestItem"),c=b("Vector").getViewportDimensions().y,d=a.length-1;while(d>this._lastRequestSeen){var e=b("Vector").getElementPosition(a[d],"viewport").y;if(e>0&&e+b("Vector").getElementDimensions(a[d]).y<=c)break;d-=1}e=d;while(d>this._lastRequestSeen){c=a[d].getAttribute("data-id");var f={request_id:c,request_location:"friend_center_requests",request_position:d+1};b("MarauderLogger").log("request_seen","friend_request_waterfall",f);b("FriendRequestIHEventLogger").logImpression(c);d-=1}this._lastRequestSeen=Math.max(this._lastRequestSeen,e)},_handleXout:function(){this._lastPymkSeen=Math.max(this._lastPymkSeen-1,-1),this._recordPYMKImpression()},logPYMKImpression:function(a,c){var d=b("DOM").find(a,"input.friendBrowserID");d=parseInt(d.value,10);a=parseInt(a.getAttribute("data-signature"),10);b("PymkFunnelLogger").logImpression(d,a,c)}};e.exports=a}),null);
__d("JewelQPLogging",["QPRenderer"],(function(a,b,c,d,e,f){var g=!1,h=null,i=!1;function j(){if(i)return;g&&h&&(i=!0,b("QPRenderer").logEvent(String(h.promotion_id),"view",h.instance_log_data?h.instance_log_data:{}))}a={onJewelOpened:function(){g=!0,j()},updateQPLogData:function(a){h=a,j()}};e.exports=a}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function(a,b,c,d,e,f){a=babelHelpers["extends"]({},b("ArbiterMixin"),{_initialized:!1,_count:0,_requestList:{},addFriendRequests:function(a){Object.assign(this._requestList,a)},getRequestListKeys:function(){return Object.keys(this._requestList)},removeRequest:function(a){delete this._requestList[a]},getRequestCount:function(a){return this.getRequestListKeys().length},decrementCount:function(){this.setCount(Math.max(0,this._count-1))},setCount:function(a){b("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:a},"state")},setupListeners:function(){var a=this;if(this._initialized)return;this._initialized=!0;b("Arbiter").subscribe("jewel/count-updated",function(b,c){c.jewel==="requests"&&a._updateCount(c.count)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_add"),function(b,c){return a._addRequest(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(b,c){return a._addNotification(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("mobile_requests_count"),function(b,c){return a._updateBadgeCountFromObject(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(b,c){return a._removeOldRequest(c)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("friend_requests_seen"),function(b,c){return a.setCount(0)})},_updateCount:function(a){var b=this._count!==a;this._count=a;b&&this.inform("countUpdated",a)},_addRequest:function(a){if(!a)return;a=a.obj;var b=a.from;a=a.suggester;b=this._requestList[b];b||this.setCount(this._count+1);b=b?b.type:null;a=b===19&&!a;this.inform("addRequest",{shouldReplace:a,previousType:b})},_updateBadgeCountFromObject:function(a){if(!a)return;a=a.obj;a=a.num_unseen+a.num_friend_confirmed_unseen;this._refreshJewel();this.setCount(a)},_addNotification:function(a){if(!a||a.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function(a){if(!a)return;a=this._requestList[a.obj.from];if(!a)return;this.inform("removeOldRequest",a)},_refreshJewel:function(a){a===void 0&&(a=!1),this.inform("refreshJewel",a)}});e.exports=a}),null);
__d("XGigaboxxUpdateSeenTimeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/gigaboxx/endpoint/writesafe/update_last_seen_time/",{})}),null);
__d("XOnclickRequestsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/requests/loader/",{log_impressions:{type:"Bool",defaultValue:!1},reload_content:{type:"Bool",defaultValue:!1}})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","Event","EventProfiler","Focus","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","RequestsJewelStore","ScrollableArea","TimeSlice","WebFriendingRequests","XGigaboxxUpdateSeenTimeAsyncController","XOnclickRequestsController","ge","getElementPosition","getViewportDimensions","promiseDone","requireWeak","throttle"],(function(a,b,c,d,e,f,g){var h=null;b("requireWeak")("FriendBrowserCheckboxController",function(a){return h=a});var i=31,j=600,k=30,l=160;a=function(){"use strict";a.getInstance=function(){return this.$11};a.updateFromDOM=function(){var a=this.getInstance();a&&a.fromDom()};a.setupScroll=function(){var a=this.getInstance();a&&a.setupScroll()};a.setInitialHeight=function(){var a=this.getInstance();a&&a.updateHeight()};a.maybeLoadJewel=function(){var a=this.getInstance();a&&a.maybeLoadJewel()};a.isOpen=function(){var a=this.getInstance();return a?a.$2():!1};a.create=function(b,c){this.$11&&g(0,5550);return this.$11=new a(b,c)};a.setupJewelRefresh=function(){b("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(a,c){a=b("XOnclickRequestsController").getURIBuilder().setBool("reload_content",!0).getURI();new(b("AsyncRequest"))().setURI(a).setAllowCrossPageTransition(!0).send()})};function a(a,c){var d=this;this.$2=c;this.$1=a;this.$4=-1;this.$5=-1;this.$10=b("Promise").resolve(!0);this.$8=function(a){var c=this;b("throttle").acrossTransitionsWithBlocking(function(){return c.$12(a)},5e3)()};(c=b("RequestsJewelStore")).subscribe("addRequest",this.$13.bind(this));c.subscribe("addNotification",function(){return d.$14()});c.subscribe("removeOldRequest",this.$15.bind(this));c.subscribe("refreshJewel",this.$16.bind(this));c.setupListeners();this.setupScroll();this.$17();this.$18();this.$19()}var c=a.prototype;c.fromDom=function(){var a=this,c={};b("DOMQuery").scry(this.$1,"li.objectListItem").forEach(function(b){b=b.getAttribute("id");if(b){b=a.$20(b);b&&b.requester&&(c[b.requester]=b)}});b("RequestsJewelStore").addFriendRequests(c);this.$21()};c.maybeLoadJewel=function(){var a=this;this.$9&&(this.$9(function(){a.openHandler()}),this.$9=null)};c.updateHeight=function(){var a=this.$22();a&&(a.style.height=this.$23()+"px")};c.markSeen=function(){b("promiseDone")(this.$10,function(){new(b("AsyncRequest"))(b("XGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().getURI()).setMethod("POST").send()})};c.openHandler=function(){!this.$6&&this.$2()&&(this.$6=!0,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen"));b("Arbiter").inform("requestsJewel/opened");var a=b("ge")("fbRequestsJewelLoading"),c=this.$22();if(!a&&!c)this.$9=b("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(a)this.$8({log_impressions:!0});else{a=b("RequestsJewelStore").getRequestListKeys();a.length>0&&new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI("/friends/requests/log_impressions").setData({ids:a.join(","),ref:"jewel"}).send()}b("DOMQuery").scry(this.$1,"a.findFriendsLink").forEach(function(a){b("Focus").set(a)});c&&b("ScrollableArea").poke(c);b("JewelQPLogging").onJewelOpened()};c.closeHandler=function(){b("Arbiter").inform("requestsJewel/closed"),b("DOMQuery").scry(this.$1,"li.jewelItemNew").forEach(function(a){b("CSS").removeClass(a,"jewelItemNew")})};c.setupScroll=function(){var a=this.$22();a&&(this.$7=this.$24(),this.$3=0,b("ScrollableArea").getInstance(a).subscribe("scroll",this.$25.bind(this)),this.$26(),this.$27())};c.$17=function(){b("Event").listen(this.$1,"submit",function(a){a=b("Parent").byClass(a.getTarget(),"objectListItem");a&&(b("CSS").removeClass(a,"jewelItemNew"),b("CSS").addClass(a,"jewelItemResponded"))})};c.$18=function(){var a=this;b("Event").listen(window,"resize",b("throttle").acrossTransitions(function(){a.updateHeight()}))};c.$19=function(){var a=this;b("Arbiter").subscribe("pymk-x-out",function(b,c){b=c.location;(b==="pymk_jewel_first_page"||b==="pymk_jewel")&&a.$26()})};c.$28=function(a){a=parseInt(a,10);return isNaN(a)?null:a};c.$20=function(a){a=a.match(/^(\d+)_(\d+)/);return!a?null:{requester:this.$28(a[1]),type:this.$28(a[2])}};c.$29=function(a,b){return a==null||b==null?null:a+"_"+b};c.$30=function(a,b){return a==null||b==null?null:a+"_"+b+"_req"};a.$31=function(a){a=a.getAttribute("id");return a.substring(0,a.length-6)};c.$22=function(){return b("DOMQuery").scry(this.$1,".uiScrollableArea")[0]};c.$24=function(){return b("DOMQuery").scry(this.$1,".uiScrollableAreaWrap")[0]};c.$25=function(){var a=b("DOMQuery").scry(this.$7,".uiMorePager").pop();if(a){var c=b("getElementPosition")(a).y,d=this.$22();c>0&&d&&b("CSS").addClass(d,"contentAfter");c=b("DOMQuery").find(a,"a");if(!c)return;d=b("getElementPosition")(c).y;if(d===this.$3)return;a=b("getElementPosition")(this.$7);a=a.y+a.height;if(d-300<a&&d>0){this.$3=d;a=c.getAttribute("ajaxify");a?new(b("AsyncRequest"))(a).setRelativeTo(c).setStatusElement(b("Parent").byClass(c,"stat_elem")).send():h&&h.getInstance("jewel").showMore()}}this.$26();this.$27()};c.$26=function(){if(!this.$7)return;var a=b("getElementPosition")(this.$7);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.friendBrowserListUnit"),d=c.length-1;while(d>this.$4){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$4)b("WebFriendingRequests").logPYMKImpression(c[d],"pymk_jewel"),d--;this.$4=Math.max(this.$4,f)};c.$27=function(){if(!this.$7)return;var c=b("getElementPosition")(this.$7);c=c.y+c.height;var d=b("DOMQuery").scry(this.$1,"li.objectListItem"),e=d.length-1;while(e>this.$5){var f=b("getElementPosition")(d[e]),g=f.y;f=g+f.height;if(g>0&&f<=c)break;e-=1}g=e;while(e>this.$5){f=a.$31(d[e]);b("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:f,request_location:"requests_jewel"});b("FriendRequestIHEventLogger").logImpression(f);e-=1}this.$5=Math.max(this.$5,g)};c.$12=function(c){c===void 0&&(c={}),this.$10=new(b("Promise"))(function(d,e){var f,g=!b("ge")("fbRequestsJewelLoading");f=b("XOnclickRequestsController").getURIBuilder().setBool("reload_content",g).setBool("log_impressions",(f=c.log_impressions)!=null?f:!1).getURI();new(b("AsyncRequest"))().setURI(f).setFinallyHandler(function(b){!b.getError()?(g||a.setupScroll(),d(!0)):e()}).send()})};c.$14=function(){if(this.$2())return;this.$8()};c.$13=function(a,b){a=b.shouldReplace;b=b.previousType;if(!a&&(b||this.$2()))return;this.$8()};c.$15=function(a,c){a=c.requester;c=c.type;if(this.$2()||b("ge")("fbRequestsJewelLoading")!=null)return;var d=this.$29(a,c),e=d&&b("ge")(d);e||(d=this.$30(a,c),e=b("ge")(d));e&&(b("CSS").hasClass(e,"jewelItemNew")&&b("RequestsJewelStore").decrementCount(),b("CSS").hasClass(e,"jewelItemResponded")||(b("DOM").remove(e),b("RequestsJewelStore").removeRequest(a),this.$21()))};c.$16=function(a,b){if(b!==!0&&this.$2())return;this.$8()};c.$21=function(){b("DOMQuery").scry(this.$1,"li.empty").forEach(function(a){b("CSS").conditionShow(a,b("RequestsJewelStore").getRequestCount()<=0)})};c.$23=function(){return Math.min(Math.max(b("getViewportDimensions")().height-l,k),j)+i};return a}();a.$11=null;e.exports=a}),null);
__d("Slideshow",["csx","cx","ArbiterMixin","CSS","DOM","Event","Parent","getActiveElement","mixin","shield"],(function(a,b,c,d,e,f,g,h){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e._setCurrent=function(a){var c=e._items[e._currentIndex];c&&b("CSS").removeClass(c,"_2xn");b("CSS").addClass(e._items[a],"_2xn");b("CSS").removeClass(e._root,"_2xm");c=c&&b("DOM").scry(c,"a").some(function(a){return a==b("getActiveElement")()});if(c){c=b("DOM").scry(e._items[a],"a");c[0]&&c[0].focus()}e._currentIndex=a;e._animating=!1;e.inform("page_end",a)};e.informAndResetAutoPlay=function(){e.resetAutoplay(),e._config.autoplay&&e.inform("reset_autoplay")};e.informAndStopAutoplay=function(){e.stopAutoplay(),e.inform("stop_autoplay")};e._root=c;e._config=d;e._currentIndex=0;e._animating=!1;e._autoplayTimer=null;e._autoplayTimeout=d.autoplayTimeout;e._init();return e}var d=c.prototype;d.getNode=function(){return this._root};d.getIndex=function(){return this._currentIndex};d.getNumItems=function(){return this._items.length};d.getNextArrow=function(){return this._config.arrows?b("DOM").find(this._root,"a._2xw"):null};d.getPrevArrow=function(){return this._config.arrows?b("DOM").find(this._root,"a._2xx"):null};d.page=function(a){a||(a="next");if(a==="next")(this._config.wrap||this.getIndex()<this.getNumItems()-1)&&this._animateTo((this.getIndex()+1)%this.getNumItems(),this.getIndex());else if(a==="prev"){if(this._config.wrap||this.getIndex()>0){a=(this.getNumItems()+this.getIndex()-1)%this.getNumItems();this._animateTo(a,this.getIndex())}}};d.pageTo=function(a){this._animateTo(a,this.getIndex(),b("shield")(this._setCurrent,this,a))};d.insert=function(a,c){a>this._currentIndex?b("DOM").insertAfter(this._items[a-1],c):(b("DOM").insertBefore(this._items[a],c),this._currentIndex++),this._items.splice(a,0,c),this._updateArrowState(),this.inform("items_updated")};d.push=function(a){this.insert(this._items.length,a)};d.remove=function(a){if(a<0||a>=this._items.length)return;b("DOM").remove(this._items[a]);this._items=b("DOM").scry(this._container,"li._2xr");if(a===this._currentIndex&&this._items.length){a=a%this._items.length;this._conditionFade(this._items[a],!0,null);this._setCurrent(a)}this.inform("items_updated")};d._init=function(){this._container=b("DOM").find(this._root,"ul._2xq"),this._items=b("DOM").scry(this._container,"li._2xr"),this._config.arrows&&(b("Event").listen(this._root,"click",this._clickListener.bind(this)),this._arrowNext=b("DOM").find(this._root,"a._2xw"),this._arrowPrev=b("DOM").find(this._root,"a._2xx")),this._config.autoplay&&(this._config.autoplaycontrol&&(b("Event").listen(this._root,"mouseenter",this.informAndStopAutoplay),b("Event").listen(this._root,"mouseleave",this.informAndResetAutoPlay)),this.resetAutoplay()),this.subscribe(["page_start","page_end"],function(a,c){b("CSS").conditionClass(this._root,"_2xm",a==="page_start")}.bind(this))};d._clickListener=function(a){var c=a.getTarget();c=b("Parent").byTag(c,"a");c&&!b("CSS").matchesSelector(c,"._2xo")&&(b("CSS").matchesSelector(c,"._2xw")?(this.page("next"),a.preventDefault()):b("CSS").matchesSelector(c,"._2xx")&&(this.page("prev"),a.preventDefault()))};d._updateArrowState=function(){if(!this._config.arrows)return;b("CSS").conditionClass(this._arrowNext,"_2xo",this._items.length===1);b("CSS").conditionClass(this._arrowPrev,"_2xo",this._items.length===1)};d._animateTo=function(a,b){b===void 0};d.startAutoplay=function(a){this._config.autoplay=!0,this._autoplayTimeout=a,this.resetAutoplay()};d.resetAutoplay=function(){this._config.autoplay&&(clearTimeout(this._autoplayTimer),this._autoplayTimer=setTimeout(this._autoplay.bind(this),this._autoplayTimeout))};d.stopAutoplay=function(){clearTimeout(this._autoplayTimer),this._autoplayTimer=null};d._autoplay=function(){this.resetAutoplay(),this._items.length>1&&this.page()};d.setAutoplayTimeout=function(a){this._autoplayTimeout=a};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("Carousel",["cx","Animation","CSS","Ease","Locale","Slideshow","Style","shield"],(function(a,b,c,d,e,f,g){var h=b("Locale").isRTL()?"right":"left",i=b("Ease").sineInOut;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.subscribe("items_updated",b._updateItemState.bind(babelHelpers.assertThisInitialized(b)));b._width=b._config.width;return b}var d=c.prototype;d._updateItemState=function(a,c){this._setContainerPos(a),b("Style").set(this._container,"width",this._items.length*this._config.width+this._config.widthunit)};d._updateArrowState=function(a){if(!this._config.arrows)return;var c=this._config.wrap,d=this._items.length;d=Math.floor(d/this._config.photosperframe);b("CSS").conditionClass(this._arrowNext,"_2xo",d===1||!c&&a===d-1);b("CSS").conditionClass(this._arrowPrev,"_2xo",d===1||!c&&a===0)};d._animate=function(a,c,d){c===void 0&&(c=null);var e=a===-1?this._items.length-1:a,f=0;f=this._calcOffset(a,this._config.width,this._config.peek,this._config.item_margin);this._animating=!0;this.inform("page_start",e);a=new(b("Animation"))(this._container).setUnit(this._config.widthunit).to(h,f).duration(this._config.animationDuration).ease(i).ondone(d);c!==null&&(e=this._calcOffset(c,this._config.width,this._config.peek,this._config.item_margin),a.from(h,e));a.go()};d._calcOffset=function(a,b,c,d){if(this._config.peek_with_offset){var e=-a*(b-c*2);a>0&&(e=e+c-a*(d/2));a===this._items.length-1&&(e+=c);return e}else return-a*b};d._setContainerPos=function(a){b("Style").set(this._container,h,-a*this._config.width+this._config.widthunit)};d._animateTo=function(a,c){c===void 0&&(c=null);if(this._animating)return;var d=this._items.length;if(0<=a&&a<d||!this._config.wrap){var e=(a+d)%d;this._updateArrowState(e);return this._animate(e,c,b("shield")(this._setCurrent,this,e))}e=a%d;var f=e?d-1:0,g=this._items[d-1];b("Style").set(g,"position","absolute");b("Style").set(g,h,-this._config.width+this._config.widthunit);f===0&&this._setContainerPos(-1);this._animate(e,c,function(){b("Style").set(g,"position","static"),b("Style").set(g,h,"auto"),this._setContainerPos(f),this._setCurrent(f)}.bind(this))};return c}(b("Slideshow"));e.exports=a}),null);